<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secure Key Access System</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
html,body{height:100%;overflow:hidden;}
body{
  background: linear-gradient(270deg,#020202,#001a33,#020202);
  background-size:600% 600%;
  animation:bg 15s ease infinite;
  color:white;
}
@keyframes bg{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
canvas{position:fixed;inset:0;z-index:-2;}
.center{height:100%;display:flex;align-items:center;justify-content:center;}
.glass{
  width:400px;
  padding:40px;
  border-radius:32px;
  background:rgba(255,255,255,0.12);
  backdrop-filter:blur(26px) saturate(200%);
  -webkit-backdrop-filter:blur(26px) saturate(200%);
  border:1px solid rgba(255,255,255,0.25);
  box-shadow:0 20px 45px rgba(0,0,0,0.6);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:15px;
}
h1{color:#e0f7ff;text-align:center;margin-bottom:20px;}
input{width:100%;padding:14px;border-radius:16px;border:none;outline:none;background:rgba(255,255,255,0.15);color:white;font-size:1rem;transition:background 0.3s;}
input:focus{background:rgba(255,255,255,0.25);}
button{width:100%;padding:14px;border-radius:20px;border:none;cursor:pointer;color:white;font-size:1rem;background:rgba(255,255,255,0.1);backdrop-filter: blur(15px) saturate(180%);-webkit-backdrop-filter: blur(15px) saturate(180%);border:1px solid rgba(255,255,255,0.25);box-shadow:0 8px 20px rgba(0,0,0,0.3);transition:all 0.3s ease;}
button:hover{background:rgba(255,255,255,0.25);transform:scale(1.05);box-shadow:0 12px 30px rgba(0,0,0,0.4);}
.error{color:#ff6b6b;text-align:center;}
.link{margin-top:10px;text-align:center;}
a{color:#a0f0ff;text-decoration:none;font-weight:600;}
</style>
</head>
<body>
<canvas id="snow"></canvas>
<div class="center">
  <div class="glass">
    <h1>Enter Access Key</h1>
    <input id="keyInput" placeholder="Your key here">
    <button onclick="checkKey()">Unlock</button>
    <div id="error" class="error"></div>
    <div id="download" class="link" style="display:none;">
      <a id="downloadLink" href="#">Download File</a>
    </div>
  </div>
</div>
<script>
// Expiration times
const EXPIRE = {
  '1-day': 24*60*60*1000,
  '1-week': 7*24*60*60*1000,
  'lifetime': Infinity
};

const maxAttempts = 5;
let attempts = 0;
const downloadURL = 'https://gofile.io/d/eiRBTi'; // replace with your file

// Generate random key
function generateKey(){ return crypto.randomUUID(); }

// Load keys from localStorage or regenerate if expired
function loadKeys(){
  let keys = JSON.parse(localStorage.getItem('generatedKeys') || '{}');
  const now = Date.now();
  let updated = false;

  ['1-day','1-week','lifetime'].forEach(type=>{
    const stored = keys[type];
    if(!stored || (now - stored.created) >= EXPIRE[type]){
      keys[type] = {key: generateKey(), created: now};
      updated = true;
    }
  });

  localStorage.setItem('generatedKeys', JSON.stringify(keys));

  // Send new keys to vault (without showing them here)
  if(updated){
    const vaultKeys = JSON.parse(localStorage.getItem('vaultKeys') || '[]');
    Object.keys(keys).forEach(type=>{
      if(!vaultKeys.some(k=>k.key===keys[type].key)){
        vaultKeys.push({key: keys[type].key, type:type, created: keys[type].created});
      }
    });
    localStorage.setItem('vaultKeys', JSON.stringify(vaultKeys));
  }

  return keys;
}

// Check input key
function checkKey(){
  if(attempts >= maxAttempts){
    document.getElementById('error').textContent = "Too many attempts";
    return;
  }

  const input = document.getElementById('keyInput').value.trim();
  if(!input) return;

  const keys = loadKeys();
  const valid = Object.values(keys).some(k=>k.key === input);

  if(valid){
    const token = crypto.randomUUID();
    document.getElementById('downloadLink').href = downloadURL + '?token=' + token;
    document.getElementById('download').style.display='block';
    document.getElementById('error').textContent='';
  } else {
    attempts++;
    document.getElementById('error').textContent = "Invalid key. Attempts left: " + (maxAttempts - attempts);
  }
}

// Snow animation
const canvas=document.getElementById('snow');
const ctx=canvas.getContext('2d');
let flakes=[];
function resize(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;flakes=Array.from({length:350},()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*3+1,d:Math.random()*1.5+0.5,tilt:Math.random()*Math.PI*2,tiltInc:(Math.random()*0.07)+0.02}));}
function draw(){ctx.clearRect(0,0,canvas.width,canvas.height);ctx.fillStyle='white';flakes.forEach(f=>{ctx.beginPath();ctx.arc(f.x+f.tilt,f.y,f.r,0,Math.PI*2);ctx.fill()});update();}
function update(){flakes.forEach(f=>{f.y+=f.d;f.tilt+=f.tiltInc;f.x+=Math.sin(f.tilt/2);if(f.y>canvas.height){f.y=0;f.x=Math.random()*canvas.width;}if(f.x>canvas.width) f.x=0;if(f.x<0) f.x=canvas.width;});}
resize(); setInterval(draw,20); window.onresize=resize;

// Initialize keys on load
loadKeys();
</script>
</body>
</html>
